{"version":3,"file":"commonHelpers.js","sources":["../src/js/unsplash-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://api.unsplash.com';\n\nconst API_KEY = 'LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc';\nconst END_POINT = '/search/photos';\n\n// export function getPhotos(query) {\n//   const params = new URLSearchParams({\n//     query,\n//     page: 1,\n//     per_page: 12,\n//     orientation: 'portrait',\n//     client_id: API_KEY,\n//   });\n//   return fetch(`${BASE_URL}${END_POINT}/?${params}`).then(res => {\n//     if (!res.ok) {\n//       throw new Error(res.status);\n//     }\n//     return res.json();\n//   });\n// }\n\nexport const getPhotos = query => {\n  return axios.get(`${END_POINT}`, {\n    params: {\n      query,\n      page: 1,\n      per_page: 12,\n      orientation: 'portrait',\n      client_id: API_KEY,\n    },\n  });\n};\n","export const renderMarkup = arr => {\n  return arr\n    .map(\n      ({ urls, description }) => `<li class=\"gallery__item\">\n        <img src=\"${urls.small}\" alt=\"${description}\">\n    </li>`\n    )\n    .join('');\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getPhotos } from './js/unsplash-api';\nimport { renderMarkup } from './js/render-functions';\n\nconst gallery = document.querySelector('.js-gallery');\nconst form = document.querySelector('.js-search-form');\nconst loader = document.querySelector('.js-loader');\n\niziToast.settings({\n  progressBar: false,\n  timeout: 4000,\n  resetOnHover: true,\n  icon: 'material-icons',\n  transitionIn: 'flipInX',\n  transitionOut: 'flipOutX',\n  position: 'topRight',\n});\n\nconst showLoader = () => {\n  loader.classList.remove('is-hidden');\n};\n\nconst hideLoader = () => {\n  loader.classList.add('is-hidden');\n};\n\nconst onSubmit = async e => {\n  e.preventDefault();\n  gallery.innerHTML = '';\n  showLoader();\n\n  const searchQuery =\n    e.currentTarget.elements['user-search-query'].value.trim();\n\n  if (searchQuery === '') {\n    return alert('Empty query');\n  }\n\n  try {\n    const { data } = await getPhotos(searchQuery);\n\n    if (data.results.length === 0) {\n      return iziToast.warning({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n\n    iziToast.info({\n      message: `We found ${data.total} photos`,\n    });\n\n    gallery.innerHTML = renderMarkup(data.results);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    e.target.reset();\n    hideLoader();\n  }\n\n  //   getPhotos(searchQuery)\n  //     .then(({ data }) => {\n  //       if (data.results.length === 0) {\n  //         return alert(\n  //           'Sorry, there are no images matching your search query. Please try again!'\n  //         );\n  //       }\n\n  //       alert(`We found ${data.total} photos`);\n  //       gallery.innerHTML = renderMarkup(data.results);\n  //     })\n  //     .catch(error => console.log(error))\n  //     .finally(() => {\n  //       e.target.reset();\n  //       hideLoader();\n  //     });\n};\nform.addEventListener('submit', onSubmit);\n"],"names":["axios","API_KEY","END_POINT","getPhotos","query","renderMarkup","arr","urls","description","gallery","form","loader","iziToast","showLoader","hideLoader","onSubmit","e","searchQuery","data","error"],"mappings":"wvBACAA,EAAM,SAAS,QAAU,2BAEzB,MAAMC,EAAU,8CACVC,EAAY,iBAkBLC,EAAYC,GAChBJ,EAAM,IAAI,GAAGE,CAAS,GAAI,CAC/B,OAAQ,CACN,MAAAE,EACA,KAAM,EACN,SAAU,GACV,YAAa,WACb,UAAWH,CACZ,CACL,CAAG,EC/BUI,EAAeC,GACnBA,EACJ,IACC,CAAC,CAAE,KAAAC,EAAM,YAAAC,CAAW,IAAO;AAAA,oBACbD,EAAK,KAAK,UAAUC,CAAW;AAAA,UAE9C,EACA,KAAK,EAAE,ECDNC,EAAU,SAAS,cAAc,aAAa,EAC9CC,EAAO,SAAS,cAAc,iBAAiB,EAC/CC,EAAS,SAAS,cAAc,YAAY,EAElDC,EAAS,SAAS,CAChB,YAAa,GACb,QAAS,IACT,aAAc,GACd,KAAM,iBACN,aAAc,UACd,cAAe,WACf,SAAU,UACZ,CAAC,EAED,MAAMC,EAAa,IAAM,CACvBF,EAAO,UAAU,OAAO,WAAW,CACrC,EAEMG,EAAa,IAAM,CACvBH,EAAO,UAAU,IAAI,WAAW,CAClC,EAEMI,EAAW,MAAMC,GAAK,CAC1BA,EAAE,eAAc,EAChBP,EAAQ,UAAY,GACpBI,IAEA,MAAMI,EACJD,EAAE,cAAc,SAAS,mBAAmB,EAAE,MAAM,OAEtD,GAAIC,IAAgB,GAClB,OAAO,MAAM,aAAa,EAG5B,GAAI,CACF,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMf,EAAUc,CAAW,EAE5C,GAAIC,EAAK,QAAQ,SAAW,EAC1B,OAAON,EAAS,QAAQ,CACtB,QACE,0EACV,CAAO,EAGHA,EAAS,KAAK,CACZ,QAAS,YAAYM,EAAK,KAAK,SACrC,CAAK,EAEDT,EAAQ,UAAYJ,EAAaa,EAAK,OAAO,CAC9C,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRH,EAAE,OAAO,QACTF,GACD,CAkBH,EACAJ,EAAK,iBAAiB,SAAUK,CAAQ"}